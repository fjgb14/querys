<form:select path="discountCodeByDiscountCode">
    <form:options items="${descuentos}" itemLabel="rate" />
</form:select>

    @Query("SELECT c FROM Customer c WHERE c.name LIKE CONCAT('%',:nombre, '%') OR c.microMarketByZip IN :supermercado")
    public List<Customer> findBySimilarNameOrMicroMarket (@Param("nombre") String nombre,
                                                          @Param("supermercado") List<MicroMarket> supermercado);

    @Query("SELECT c FROM Customer c WHERE c.name LIKE CONCAT('%', :nombre, '%')")
    public List<Customer> findBySimilarName (@Param("nombre") String nombre);

    @Query("SELECT c FROM Customer c WHERE c.microMarketByZip IN :supermercado")
    public List<Customer> findByMicroMarket (@Param("supermercado") List<MicroMarket> filtroSuper);

<a href="/loquetesalgadelapolla"><button type="button">BotonWeno</button></a>

@Query("SELECT DISTINCT p FROM Pelicula p JOIN p.categoriaList c WHERE c IN :categorias")
    public List<Pelicula> findByCategoria(List<Categoria> categorias);


    @GetMapping("/")
    public String listarPelis(@ModelAttribute("filtro") FiltroPelicula filtro, Model model) {
        model.addAttribute("categorias", categoriaRepository.findAll());
        if (!filtro.getCategorias().isEmpty()) {
            model.addAttribute("pelis", peliculaRepository.findByCategorias(filtro.getCategorias()));
        } else {
            model.addAttribute("pelis", peliculaRepository.findAll());
        }
        return "index";
    }
    
    
    @Query("SELECT distinct p from Producto p join PedidoProducto pp on pp.producto.productoId = p.productoId " +
            "join Pedido pedido on pedido.pedidoId = pp.pedido.pedidoId where p.disponible = true and p.cantidad>=1 " +
            "and pedido.clienteId.clienteId <> :idCliente")
    List<Producto> productosDisponibles(@Param("idCliente") Integer idCliente);

        public List<Producto> findProductosDisponibles(Integer idPedido){
        Query q = this.em.createQuery("Select p from Producto p where p.cantidad > 0 and p.disponible=true and p not in (Select pp.producto from PedidoProducto pp where pp.pedido.pedidoId = :idPedido)");
        q.setParameter("idPedido", idPedido);
        List<Producto> aux = q.getResultList();
        if(aux!=null && !aux.isEmpty()){
            return aux;
        }else{
            return null;
        }
    }
